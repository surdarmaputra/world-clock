(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8317:function(e,l,t){Promise.resolve().then(t.bind(t,478))},478:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return J}});var a=t(7437),n=t(2265),r=t(2929),s=t(2695),o=t(2333),i=t(9222);let c=i.Z.create({baseURL:"https://worldtimeapi.org/api",headers:{Accept:"application/json","Content-Type":"application/json"}});async function u(e,l){let{url:t,...a}=e,n=await c({url:t,...a,...l});return null==n?void 0:n.data}let d=(e,l,t)=>u({url:"/timezone/".concat(e,"/").concat(l),method:"get"},t),m=(e,l)=>["/timezone/".concat(e,"/").concat(l)],f=(e,l,t)=>{var a;let{swr:n,request:r}=null!=t?t:{},s=(null==n?void 0:n.enabled)!==!1&&!!(e&&l),i=null!==(a=null==n?void 0:n.swrKey)&&void 0!==a?a:()=>s?m(e,l):null,c=(0,o.ZP)(i,()=>d(e,l,r),n);return{swrKey:i,...c}},h=e=>u({url:"/ip",method:"get"},e),x=()=>["/ip"],b=e=>{var l;let{swr:t,request:a}=null!=e?e:{},n=(null==t?void 0:t.enabled)!==!1,r=null!==(l=null==t?void 0:t.swrKey)&&void 0!==l?l:()=>n?x():null,s=(0,o.ZP)(r,()=>h(a),t);return{swrKey:r,...s}};function v(e){let{clockData:l,refetch:t}=e;(0,n.useEffect)(()=>{if(!l)return;let e=60-Math.ceil(null==l?void 0:l.seconds),a=setTimeout(()=>t(),1e3*e+500);return()=>{clearTimeout(a)}},[l,t])}function p(e){if(!e)return null;let[,l]=e.timezone.split("/"),[,t]=e.datetime.split("T"),[a,n,r]=t.split(":"),[s]=r.includes("-")?r.split("-"):r.split("+"),o="0".concat(a).slice(-2),i="0".concat(n).slice(-2),[c]=e.utc_offset.split(":"),u=Number(c||0);return{abbreviation:e.abbreviation,formattedHours:o,formattedMinutes:i,hours:Number(a),location:l.replace("_"," "),minutes:Number(n),seconds:Number(s),utcOffsetHours:u}}function j(e){let{onChange:l}=e,{data:t,isLoading:n,mutate:r}=b(),o=p(t),i=n||!o;return null==l||l(o),v({clockData:o,refetch(){r()}}),(0,a.jsx)("div",{className:"text-center mb-10 p-16","data-testid":"mainClock",children:i?(0,a.jsx)(s.c,{"data-testid":"spinner",size:"lg"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-2xl mb-1",children:null==o?void 0:o.location}),(0,a.jsxs)("h2",{className:"text-6xl font-bold",children:[null==o?void 0:o.formattedHours,":",null==o?void 0:o.formattedMinutes]})]})})}var g=t(2783),w=t(667),N=t(6400),y=t(4328);let k=[{label:"Singapore",value:"Asia/Singapore"},{label:"Tokyo",value:"Asia/Tokyo"},{label:"Seoul",value:"Asia/Seoul"},{label:"Melbourne",value:"Australia/Melbourne"},{label:"Sydney",value:"Australia/Sydney"},{label:"London",value:"Europe/London"},{label:"Paris",value:"Europe/Paris"},{label:"Berlin",value:"Europe/Berlin"},{label:"New York",value:"America/New_York"},{label:"Los Angeles",value:"America/Los_Angeles"}].sort((e,l)=>e.label<l.label?-1:e.label>l.label?1:0),A="displayedClocks";var C=t(1865),O=t(4776),z=t(4823),S=t(1310),L=t(1718),E=t(9571),H=t(2913),M=t(9174),_=t(390);function P(e){let{autoFocus:l,errorMessage:t,isInvalid:n,label:r,placeholder:s,variant:o,value:i,onChange:c,children:u,name:d}=e;return(0,a.jsx)(_.g,{autoFocus:l,errorMessage:t,isInvalid:n,label:r,name:d,onChange:c,placeholder:s,value:i,variant:o,children:u})}function I(e){let{excludedTimezones:l=[],isOpen:t,onOpenChange:r,onSubmit:s}=e,{control:o,handleSubmit:i,register:c,reset:u}=(0,C.cI)({defaultValues:{label:"",timezone:""}}),{errors:d}=(0,C.cl)({control:o}),m=k.filter(e=>!l.includes(e.value)),f=i(e=>{null==s||s(e)});return(0,n.useEffect)(()=>{t||u()},[t,u]),(0,a.jsx)(z.R,{isOpen:t,onOpenChange:r,placement:"top-center",children:(0,a.jsx)(S.A,{children:e=>{var l,t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.k,{className:"flex flex-col gap-1",children:"Add New Clock"}),(0,a.jsx)(E.I,{children:(0,a.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:f,children:[(0,a.jsx)(P,{autoFocus:!0,errorMessage:null==d?void 0:null===(l=d.timezone)||void 0===l?void 0:l.message,isInvalid:!!(null==d?void 0:d.timezone),label:"City",placeholder:"Select city",variant:"bordered",...c("timezone",{required:"Please select any city"}),children:m.map(e=>{let{label:l,value:t}=e;return(0,a.jsx)(M.R,{value:t,children:l},t)})}),(0,a.jsx)(O.Y,{errorMessage:null==d?void 0:null===(t=d.label)||void 0===t?void 0:t.message,isInvalid:!!(null==d?void 0:d.label),label:(0,a.jsxs)("div",{children:["Label"," ",(0,a.jsx)("span",{className:"ml-1 text-default-400",children:"(Optional)"})]}),placeholder:"Hometown, office or anything...",variant:"bordered",...c("label",{maxLength:{value:20,message:"Maximum 20 characters"}})})]})}),(0,a.jsxs)(H.R,{children:[(0,a.jsx)(w.A,{color:"default",onPress:e,variant:"flat",children:"Cancel"}),(0,a.jsx)(w.A,{color:"primary",onPress:()=>f(),children:"Add Clock"})]})]})}})})}var R=t(2893),T=t(6914),Z=t(1507),F=t(5919);function q(e){let{label:l,mainClockLocation:t,onRemove:n,timezone:r}=e,[o,i]=r.split("/"),{data:c,isLoading:u,mutate:d}=f(o,i),m=p(c),h=((null==m?void 0:m.utcOffsetHours)||0)-t.utcOffsetHours,x="".concat(Math.abs(h)," hours ").concat(h>=0?"ahead":"behind"," ").concat(t.location),b=u||!m;return v({clockData:m,refetch(){d()}}),(0,a.jsxs)(T.w,{className:"w-full sm:w-44 h-60 transition hover:-translate-y-1 group shadow-2xl border-default-50 border-1 shadow-default-200 overflow-visible","data-testid":"worldClock",children:[(0,a.jsx)(Z.G,{className:"text-center flex flex-col items-center ".concat(b?"justify-center":"justify-between"),children:b?(0,a.jsx)(s.c,{"data-testid":"spinner",size:"lg"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{className:"h-10",children:[(0,a.jsx)("div",{children:m.location}),(0,a.jsx)("div",{className:"text-sm text-default-400",children:l})]}),(0,a.jsxs)("h2",{className:"text-3xl font-bold my-6",children:[m.formattedHours,":",m.formattedMinutes]}),(0,a.jsx)("div",{className:"mb-1",children:(0,a.jsx)(F.z,{className:"border-1 px-2 text-default-500",color:"default",size:"sm",variant:"bordered",children:m.abbreviation})}),(0,a.jsx)("div",{className:"text-xs text-default-400",children:x})]})}),(0,a.jsx)(R.Z,{className:"text-danger-500 absolute -right-1 -top-1 cursor-pointer z-10 w-6 h-6 opacity-0 group-hover:opacity-100 transition","data-testid":"removeButton",onClick:()=>null==n?void 0:n()})]})}function B(e){let{mainClockLocation:l}=e,t=(0,n.useRef)(!0),{isOpen:r,onOpen:s,onOpenChange:o}=(0,N.q)(),[i,c]=(0,n.useState)([]),u=i.map(e=>{let{timezone:l}=e;return l}),d=i.length<4,m=e=>{let l=i.filter(l=>l.timezone!==e);c(l)};return(0,n.useEffect)(()=>{let e;if(t.current){t.current=!1;return}e=Array.isArray(i)?JSON.stringify(i):i,window.localStorage.setItem(A,e)},[i]),(0,n.useEffect)(()=>{let e=function(e){let l;let t=window.localStorage.getItem(e);if(!t)return t;try{l=JSON.parse(t)}catch(e){l=t}return l}(A)||[];return c(e),()=>{t.current=!0}},[]),(0,a.jsxs)("div",{className:"flex gap-6 justify-center flex-col sm:flex-row",children:[i.map(e=>{let{label:t,timezone:n}=e;return(0,a.jsx)(q,{label:t,mainClockLocation:l,onRemove:()=>m(n),timezone:n},n)}),d&&(0,a.jsx)(y.e,{color:"foreground",content:"Add world clock",placement:"bottom",showArrow:!0,children:(0,a.jsx)(w.A,{className:"w-full sm:w-44 h-60 border-default-400 border-dashed border-1",disableRipple:!0,onPress:s,variant:"bordered",children:(0,a.jsx)(g.Z,{className:"text-default-400"})})}),(0,a.jsx)(I,{excludedTimezones:u,isOpen:r,onOpenChange:o,onSubmit:e=>{let l=[...i,{timezone:e.timezone,label:e.label}];c(l),o()}})]})}function J(){let[e,l]=(0,n.useState)({location:"Jakarta",utcOffsetHours:7});return(0,a.jsxs)("main",{children:[(0,a.jsxs)("h1",{className:"text-center text-xl font-bold flex items-center justify-center mb-8",children:[(0,a.jsx)(r.Z,{className:"w-8 h-8 mr-2"}),"World Clock"]}),(0,a.jsx)(j,{onChange:t=>{t&&t.utcOffsetHours!==e.utcOffsetHours&&l({location:t.location,utcOffsetHours:t.utcOffsetHours})}}),(0,a.jsx)(B,{mainClockLocation:e})]})}}},function(e){e.O(0,[111,242,971,864,744],function(){return e(e.s=8317)}),_N_E=e.O()}]);